#!/bin/bash
mkdir dist
rsync --exclude dist --exclude .DS_Store --exclude bower_components --exclude .idea --exclude .git --exclude .gitignore --exclude pullSupportedSites.sh --exclude sites.list --exclude *.sh -av . dist

mv dist RecipeCalCalc
zip -r recipecalcalc.zip RecipeCalCalc
rm -rf RecipeCalCalc


#SELECT r.recipe_id AS recipe_id, r.portions AS portions, nar.FoodWeight/portions AS FoodWeight,nar.Water/portions AS Water,nar.Energ_Kcal/portions AS Energ_Kcal,nar.Protein/portions AS Protein,nar.Lipid_Tot/portions AS Lipid_Tot,nar.Ash/portions AS Ash,nar.Carbohydrt/portions AS Carbohydrt,nar.Fiber_TD/portions AS Fiber_TD,nar.Sugar_Tot/portions AS Sugar_Tot,nar.Calcium/portions AS Calcium,nar.Iron/portions AS Iron,nar.Magnesium/portions AS Magnesium,nar.Phosphorus/portions AS Phosphorus,nar.Potassium/portions AS Potassium,nar.Sodium/portions AS Sodium,nar.Zinc/portions AS Zinc,nar.Copper/portions AS Copper,nar.Manganese/portions AS Manganese,nar.Selenium/portions AS Selenium,nar.Vit_C/portions AS Vit_C,nar.Thiamin/portions AS Thiamin,nar.Riboflavin/portions AS Riboflavin,nar.Niacin/portions AS Niacin,nar.Panto_Acid/portions AS Panto_Acid,nar.Vit_B6/portions AS Vit_B6,nar.Folate_Tot/portions AS Folate_Tot,nar.Folic_Acid/portions AS Folic_Acid,nar.Food_Folate/portions AS Food_Folate,nar.Folate_DFE/portions AS Folate_DFE,nar.Choline_Tot/portions AS Choline_Tot,nar.Vit_B12/portions AS Vit_B12,nar.Vit_A_IU/portions AS Vit_A_IU,nar.Vit_A_RAE/portions AS Vit_A_RAE,nar.Retinol/portions AS Retinol,nar.Alpha_Carot/portions AS Alpha_Carot,nar.Beta_Carot/portions AS Beta_Carot,nar.Beta_Crypt/portions AS Beta_Crypt,nar.Lycopene/portions AS Lycopene,nar.Lut_Zea/portions AS Lut_Zea,nar.Vit_E/portions AS Vit_E,nar.Vit_D_mcg/portions AS Vit_D_mcg,nar.ViVit_D_IU/portions AS ViVit_D_IU,nar.Vit_K/portions AS Vit_K,nar.FA_Sat/portions AS FA_Sat,nar.FA_Mono/portions AS FA_Mono,nar.FA_Poly/portions AS FA_Poly,nar.Cholestrl/portions AS Cholestrl FROM recipe AS r RIGHT JOIN (SELECT recipe_id, SUM(na.FoodWeight*(i.amount/100)) AS FoodWeight,SUM(na.Water*(i.amount/100)) AS Water,SUM(na.Energ_Kcal*(i.amount/100)) AS Energ_Kcal,SUM(na.Protein*(i.amount/100)) AS Protein,SUM(na.Lipid_Tot*(i.amount/100)) AS Lipid_Tot,SUM(na.Ash*(i.amount/100)) AS Ash,SUM(na.Carbohydrt*(i.amount/100)) AS Carbohydrt,SUM(na.Fiber_TD*(i.amount/100)) AS Fiber_TD,SUM(na.Sugar_Tot*(i.amount/100)) AS Sugar_Tot,SUM(na.Calcium*(i.amount/100)) AS Calcium,SUM(na.Iron*(i.amount/100)) AS Iron,SUM(na.Magnesium*(i.amount/100)) AS Magnesium,SUM(na.Phosphorus*(i.amount/100)) AS Phosphorus,SUM(na.Potassium*(i.amount/100)) AS Potassium,SUM(na.Sodium*(i.amount/100)) AS Sodium,SUM(na.Zinc*(i.amount/100)) AS Zinc,SUM(na.Copper*(i.amount/100)) AS Copper,SUM(na.Manganese*(i.amount/100)) AS Manganese,SUM(na.Selenium*(i.amount/100)) AS Selenium,SUM(na.Vit_C*(i.amount/100)) AS Vit_C,SUM(na.Thiamin*(i.amount/100)) AS Thiamin,SUM(na.Riboflavin*(i.amount/100)) AS Riboflavin,SUM(na.Niacin*(i.amount/100)) AS Niacin,SUM(na.Panto_Acid*(i.amount/100)) AS Panto_Acid,SUM(na.Vit_B6*(i.amount/100)) AS Vit_B6,SUM(na.Folate_Tot*(i.amount/100)) AS Folate_Tot,SUM(na.Folic_Acid*(i.amount/100)) AS Folic_Acid,SUM(na.Food_Folate*(i.amount/100)) AS Food_Folate,SUM(na.Folate_DFE*(i.amount/100)) AS Folate_DFE,SUM(na.Choline_Tot*(i.amount/100)) AS Choline_Tot,SUM(na.Vit_B12*(i.amount/100)) AS Vit_B12,SUM(na.Vit_A_IU*(i.amount/100)) AS Vit_A_IU,SUM(na.Vit_A_RAE*(i.amount/100)) AS Vit_A_RAE,SUM(na.Retinol*(i.amount/100)) AS Retinol,SUM(na.Alpha_Carot*(i.amount/100)) AS Alpha_Carot,SUM(na.Beta_Carot*(i.amount/100)) AS Beta_Carot,SUM(na.Beta_Crypt*(i.amount/100)) AS Beta_Crypt,SUM(na.Lycopene*(i.amount/100)) AS Lycopene,SUM(na.Lut_Zea*(i.amount/100)) AS Lut_Zea,SUM(na.Vit_E*(i.amount/100)) AS Vit_E,SUM(na.Vit_D_mcg*(i.amount/100)) AS Vit_D_mcg,SUM(na.ViVit_D_IU*(i.amount/100)) AS ViVit_D_IU,SUM(na.Vit_K*(i.amount/100)) AS Vit_K,SUM(na.FA_Sat*(i.amount/100)) AS FA_Sat,SUM(na.FA_Mono*(i.amount/100)) AS FA_Mono,SUM(na.FA_Poly*(i.amount/100)) AS FA_Poly,SUM(na.Cholestrl*(i.amount/100)) AS Cholestrl  FROM ingredient AS i LEFT JOIN ABBREV AS na ON food_id=NDB_No WHERE recipe_id=291634 GROUP BY recipe_id ) AS nar ON nar.recipe_id=r.recipe_id
